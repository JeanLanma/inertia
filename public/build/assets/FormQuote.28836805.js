import{J as j,u as E,M as P,o as i,d as r,a as t,f as v,t as p,g as o,b as c,w as m,v as x,A as L,e as f,N as A,O as g,F as y,h as w,P as O,Q as G,R as J}from"./app.606b6dd9.js";import{_ as K}from"./FormSection.7e64d2c9.js";import V from"./InputNumber.184dda8b.js";import h from"./InputLabel.4ab121b7.js";import R from"./InputText.ebdfe534.js";import W from"./Summary.88649476.js";import $ from"./InputDate.2676a7ab.js";import{_ as X}from"./_plugin-vue_export-helper.cdc0426e.js";import"./SectionTitle.29988d65.js";const n=j({season:"low",hotels:{cancun:null,rm:null},cancunHotels:null,rmHotels:null,tours:[],nPackTours:0,nTours:[],tour:{activity:0,pickup:"12:00",hotel:null},resume:{total:{adults:0,minors:0}},prices:{totalPublicPrice:0,totalAgencyPrice:0,reference:0,cost:{adult:0,minor:0},profit:{percentage:5,amount:0}}}),Y=async(a,_=null)=>await(await fetch(a,_)).json(),F=async()=>{const a=await fetch(route("tours"));n.tours=await a.json()},z=async a=>await Y(route("hotels",{zone:a==1?a:2})),ee=async a=>n.hotels=await z(a),oe=async(a,_)=>await(await fetch(route("nd.pickup.get",{activity:a,hotel:_}))).json(),B=async(a,_)=>!a||!_?null:await oe(a,_),te=async(a,_,e)=>{n.nTours[a].pickup=await B(_,e).then(k=>k.pickup_time)},se=a=>["2022-12-26","2022-12-27","2022-12-28","2022-12-29","2022-12-30","2022-12-31"].includes(a)?"high":"low",T=async(a,_,e)=>await(await fetch(route("prices",{activity:a,zone:_,season:e}))).json(),ne=async a=>{if(a==1&&!n.hotels.cancun)n.hotels.cancun=[...await z(1)],console.log("cargar Cancun Hoteles");else if(n.hotels.cancun)return console.log("Cancun ya tiene Hoteles cargados"),n;if((a==2||a==3)&&!n.hotels.rm)n.hotels.rm=[...await z(2)],console.log("cargar R.M. y P.D.C Hoteles");else if(n.hotels.rm)return console.log("R.M. y P.D.C ya tiene Hoteles cargados"),n;return n},le=new Date().toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),N=a=>{var e;return(e=["no especificada","entrada","tour","paquete"][a])!=null?e:"invalida"},S=(a,_)=>Number(Number(a)+Number(_)).toFixed(2);const u=a=>(G("data-v-7b157b94"),a=a(),J(),a),ae={class:"p-6 sm:px-20 bg-white border-b border-gray-200"},ie={class:"mt-4 text-2xl text-center"},re={class:"text-lg"},de=u(()=>t("div",{class:"md:mx-14 md:my-10 font-bold"},"Resumen de la cotizaci\xF3n.",-1)),ue={class:"mb-4"},ce=u(()=>t("br",null,null,-1)),pe=u(()=>t("br",null,null,-1)),me=u(()=>t("br",null,null,-1)),fe=u(()=>t("div",{class:"col-span-6"},[t("div",{class:"max-w-xl text-sm text-gray-600"}," Por favor llene el siguiente formulario para poder realizar su cotizaci\xF3n. ")],-1)),_e={class:"flex items-center justify-center px-12 pt-4 col-span-6 sm:col-span-4"},ve={class:"mx-auto w-full max-w-[550px]"},be={key:0,class:"mb-5"},he=u(()=>t("small",{class:"text-gray-400"},"Descuento para mexicanos, presentar INE o pasaporte.",-1)),xe={for:"nacionalesId",class:"flex items-center cursor-pointer text-base font-medium text-[#07074D]"},ye={class:"mr-2"},we={class:"relative"},ge=u(()=>t("div",{class:"toggle-path bg-gray-200 w-9 h-5 rounded-full shadow-inner"},null,-1)),ke=u(()=>t("div",{class:"toggle-circle absolute w-3.5 h-3.5 bg-white rounded-full shadow inset-y-0 left-0"},null,-1)),Ve={class:"mb-5"},Pe=u(()=>t("label",{class:"mb-3 block text-base font-medium text-[#07074D]"}," Tipo de reservaci\xF3n? ",-1)),Ae={class:"flex items-center space-x-6"},Te={class:"flex items-center"},ze=u(()=>t("label",{for:"radioButton1",class:"pl-3 text-base font-medium text-[#07074D]"}," Entrada ",-1)),Ue={class:"flex items-center"},Re=u(()=>t("label",{for:"radioButton2",class:"pl-3 text-base font-medium text-[#07074D]"}," Tour ",-1)),$e={class:"flex items-center"},Fe=u(()=>t("label",{for:"radioButton3",class:"pl-3 text-base font-medium text-[#07074D]"}," Paquete ",-1)),Ne={key:1,class:"-mx-3 flex flex-wrap"},Se={class:"w-full px-3"},Be={class:"mb-5"},Ce={key:0,class:"text-red-500"},De={class:"-mx-3 flex flex-wrap"},He={class:"w-full px-3"},Ie={class:"mb-5"},Me={class:"flex flex-wrap justify-between"},qe={class:"mb-5 w-28"},Qe={class:"mb-5 w-28"},Ze=u(()=>t("br",null,null,-1)),je=u(()=>t("br",null,null,-1)),Ee={class:"mb-5 w-28"},Le={key:2,class:"-mx-3 flex flex-wrap"},Oe={class:"w-full px-3"},Ge={class:"mb-5"},Je=u(()=>t("option",{value:"null",disabled:"",selected:""},"-- Seleccione un parque --",-1)),Ke=["value"],We={key:3,class:"-mx-3 flex flex-wrap"},Xe={class:"w-full px-3"},Ye={class:"mb-5"},eo=u(()=>t("label",{for:"fName",class:"mb-3 block text-base font-medium text-[#07074D]"}," Tour ",-1)),oo=u(()=>t("option",{value:"null",selected:"",disabled:""},"-- Seleccione un tour --",-1)),to=["value"],so={key:4,class:"-mx-3 flex flex-wrap"},no={class:"mb-5 w-28"},lo={key:5,class:"-mx-3 flex flex-wrap"},ao={class:"w-full px-3"},io={class:"mb-5"},ro=u(()=>t("label",{for:"fName",class:"mb-3 block text-base font-medium text-[#07074D]"}," Tour ",-1)),uo=["onUpdate:modelValue"],co=u(()=>t("option",{value:"null",selected:"",disabled:""}," -- Seleccione un tour -- ",-1)),po=["value"],mo={class:"mb-5"},fo={key:0,class:"text-red-500"},_o={class:"mb-5"},vo=["onUpdate:modelValue"],bo=u(()=>t("option",{value:"null",selected:"",disabled:""},"-- Seleccione su zona --",-1)),ho=["value"],xo={class:"mb-5"},yo=["onInput","onFocusout","onUpdate:modelValue"],wo=u(()=>t("option",{value:"null",selected:"",disabled:""},"-- Seleccione un hotel --",-1)),go=["value"],ko={key:0,class:"mb-5"},Vo=u(()=>t("hr",null,null,-1)),Po=u(()=>t("br",null,null,-1)),Ao={key:6,class:"-mx-3 flex flex-wrap"},To={class:"w-full px-3"},zo={class:"mb-5"},Uo=u(()=>t("option",{value:"null",selected:"",disabled:""},"-- Seleccione su zona --",-1)),Ro=["value"],$o={key:7,class:"-mx-3 flex flex-wrap"},Fo={class:"w-full px-3"},No={key:0,class:"mb-5"},So=u(()=>t("option",{value:"null",selected:"",disabled:""},"-- Seleccione un hotel --",-1)),Bo=["value"],Co={class:"-mx-3 flex flex-wrap"},Do={class:"w-full px-3"},Ho={class:"mb-5"},Io=u(()=>t("button",{class:"hover:shadow-form rounded-md bg-[#6A64F1] py-3 px-8 text-center text-base font-semibold text-white outline-none"}," Enviar Cotizaci\xF3n ",-1)),Mo={__name:"FormQuote",props:{parks:Array,zones:Array},setup(a){const _=a,e=E({fechaReservacion:new Date().toISOString().split("T")[0],fechaActividad:null,precioPublico:null,tipoReservacion:1,nacionales:!1,nombreTitular:"",importeVenta:0,pickUp:null,infantes:0,notas:null,adultos:1,menores:0,zona:null,season:"low",actividad:null}),k=()=>{n.resume.total.adults=e.adultos*n.prices.cost.adult,n.resume.total.minors=e.menores*n.prices.cost.minor,n.prices.totalPublicPrice=S(n.resume.total.adults,n.resume.total.minors),e.precioPublico=n.prices.totalPublicPrice,e.importeVenta=C().toFixed(2),n.prices.totalAgencyPrice=e.importeVenta,n.prices.reference=(n.prices.totalPublicPrice-n.prices.totalAgencyPrice).toFixed(2),console.log(n)},C=()=>n.prices.totalPublicPrice*((100-n.prices.profit.percentage)/100),D=async()=>{const b=await T(e.actividad,e.nacionales?4:5,e.season);n.prices.cost.adult=b.adult.amount,n.prices.cost.minor=b.minor.amount,k()},H=async(b,l,s)=>{const d=await T(b,l,s);n.prices.cost.adult=d.adult.amount,n.prices.cost.minor=d.minor.amount,k()},I=b=>b>0?"$"+b:"";P(()=>{e.nacionales=e.tipoReservacion!=1?!1:e.nacionales}),P(()=>{e.season=se(e.fechaActividad)}),P(()=>{for(var b=[],l=n.nPackTours,s=0;s<l;s++)b.push({key:s+1,activity:null,zone:null,hotel:null,pickup:null,activity_date:null,public_price:null,agency_price:null});n.nTours=b});const M=async(b,l,s,d)=>{const U=await T(b,l,s);n.nTours[d].public_price=S(e.adultos*Number(U.adult.amount),e.menores*Number(U.minor.amount)),e.precioPublico+=n.nTours[d].public_price,e.importeVenta+=e.precioPublico*((100-n.prices.profit.percentage)/100),console.log(n.nTours)},q=async(b,l)=>{var s;n.tour.pickup=(s=await B(b,l).catch(d=>d.pickup_time))!=null?s:"N/D",e.actividad=n.tour,console.log(n)};function Q(){e.tipoReservacion==3&&(e.actividad=n.nTours),e.tipoReservacion=N(e.tipoReservacion)}function Z(){Q(),e.post(route("quote.store")),n.nTours=[],e.reset()}return(b,l)=>(i(),r("div",null,[t("div",ae,[t("div",ie,[v(" Nueva cotizaci\xF3n "),t("p",re,"Fecha de hoy: "+p(o(le)),1)])]),c(K,{onSubmitted:Z},{title:m(()=>[de]),description:m(()=>[c(W,null,{header:m(()=>[v(" Precio al publico "+p(I(o(n).prices.totalPublicPrice)),1)]),content:m(()=>[t("p",ue,"( Temporada "+p(o(e).season=="low"?"Baja":"Alta")+", Tarifa "+p(o(e).nacionales?"Nacional":"Internacional")+")",1),t("p",null,"A nombre de: "+p(o(e).nombreTitular),1),ce,t("p",null,"Adultos: "+p(`${o(e).adultos} x $${o(n).prices.cost.adult} = $${o(e).adultos*o(n).prices.cost.adult}`),1),t("p",null,"Menores: "+p(`${o(e).menores} x $${o(n).prices.cost.minor} = $${o(e).menores*o(n).prices.cost.minor}`),1),t("p",null,"Infantes: "+p(`${o(e).infantes}`)+" - no pagan",1),pe,t("p",null,"Tipo de reserva: "+p(o(N)(o(e).tipoReservacion)),1),me,t("p",null,"Precio sugerido al publico: $"+p(o(n).prices.totalPublicPrice),1),t("p",null,"Costo para la agencia: $"+p(o(n).prices.totalAgencyPrice),1)]),_:1})]),form:m(()=>[fe,t("div",_e,[t("div",ve,[o(e).tipoReservacion==1?(i(),r("div",be,[he,t("label",xe,[t("span",ye,"Nacionales? "+p(o(e).nacionales?"Si":"No"),1),t("div",we,[x(t("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>o(e).nacionales=s),id:"nacionalesId",type:"checkbox",class:"hidden"},null,512),[[L,o(e).nacionales]]),ge,ke])])])):f("",!0),t("div",Ve,[Pe,t("div",Ae,[t("div",Te,[x(t("input",{value:"1",type:"radio",name:"tipoReservacion",id:"radioButton1",checked:"",class:"h-5 w-5","onUpdate:modelValue":l[1]||(l[1]=s=>o(e).tipoReservacion=s)},null,512),[[A,o(e).tipoReservacion]]),ze]),t("div",Ue,[x(t("input",{onClick:l[2]||(l[2]=()=>o(F)()),value:"2",type:"radio",name:"tipoReservacion",id:"radioButton2",class:"h-5 w-5","onUpdate:modelValue":l[3]||(l[3]=s=>o(e).tipoReservacion=s)},null,512),[[A,o(e).tipoReservacion]]),Re]),t("div",$e,[x(t("input",{onClick:l[4]||(l[4]=()=>o(F)()),value:"3",type:"radio",name:"tipoReservacion",id:"radioButton3",class:"h-5 w-5","onUpdate:modelValue":l[5]||(l[5]=s=>o(e).tipoReservacion=s)},null,512),[[A,o(e).tipoReservacion]]),Fe])])]),o(e).tipoReservacion?(i(),r("div",Ne,[t("div",Se,[t("div",Be,[c(h,{for:"fechaAvtidad"},{default:m(()=>[v(" Fecha de actividad "),o(e).errors.fechaActividad?(i(),r("span",Ce,"* Por favor llene este campo")):f("",!0)]),_:1}),c($,{required:"",modelValue:o(e).fechaActividad,"onUpdate:modelValue":l[6]||(l[6]=s=>o(e).fechaActividad=s),"id-name":"fechaActividad"},null,8,["modelValue"])])])])):f("",!0),t("div",De,[t("div",He,[t("div",Ie,[c(h,{for:"QuoteTitular"},{default:m(()=>[v(" Nombre del titular ")]),_:1}),c(R,{placeholder:"Aa",id:"QuoteTitular",name:"nombreTitular",modelValue:o(e).nombreTitular,"onUpdate:modelValue":l[7]||(l[7]=s=>o(e).nombreTitular=s)},null,8,["modelValue"])])])]),t("div",Me,[t("div",qe,[c(h,{for:"adultos"},{default:m(()=>[v(" Adultos ")]),_:1}),c(V,{"id-name":"adultos",modelValue:o(e).adultos,"onUpdate:modelValue":l[8]||(l[8]=s=>o(e).adultos=s)},null,8,["modelValue"])]),t("div",Qe,[c(h,{for:"menores"},{default:m(()=>[v(" Menores ")]),_:1}),c(V,{"id-name":"menores",modelValue:o(e).menores,"onUpdate:modelValue":l[9]||(l[9]=s=>o(e).menores=s)},null,8,["modelValue"])]),Ze,je,t("div",Ee,[c(h,{for:"infantes"},{default:m(()=>[v(" Infantes ")]),_:1}),c(V,{"id-name":"infantes",modelValue:o(e).infantes,"onUpdate:modelValue":l[10]||(l[10]=s=>o(e).infantes=s)},null,8,["modelValue"])])]),o(e).tipoReservacion==1?(i(),r("div",Le,[t("div",Oe,[t("div",Ge,[c(h,{for:"park"},{default:m(()=>[v(" Parque ")]),_:1}),x(t("select",{onChange:l[11]||(l[11]=s=>D()),"onUpdate:modelValue":l[12]||(l[12]=s=>o(e).actividad=s),id:"park",name:"parque",ref:"park",class:"capitalize w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[Je,(i(!0),r(y,null,w(_.parks,s=>(i(),r("option",{class:"capitalize",value:s.id},p(s.name),9,Ke))),256))],544),[[g,o(e).actividad]])])])])):f("",!0),o(e).tipoReservacion==2?(i(),r("div",We,[t("div",Xe,[t("div",Ye,[eo,o(n).tours?x((i(),r("select",{key:0,"onUpdate:modelValue":l[13]||(l[13]=s=>o(n).tour.activity=s),name:"parque",class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[oo,(i(!0),r(y,null,w(o(n).tours,s=>(i(),r("option",{class:"capitalize",value:s.id},p(s.name),9,to))),256))],512)),[[g,o(n).tour.activity]]):f("",!0)])])])):f("",!0),o(e).tipoReservacion==3?(i(),r("div",so,[t("div",no,[c(h,{for:"number_of_activitys"},{default:m(()=>[v(" Numero de actividades ")]),_:1}),c(V,{modelValue:o(n).nPackTours,"onUpdate:modelValue":l[14]||(l[14]=s=>o(n).nPackTours=s),modelModifiers:{number:!0},"id-name":"number_of_activitys"},null,8,["modelValue"])])])):f("",!0),o(e).tipoReservacion==3&&o(n).nTours!=0?(i(),r("div",lo,[(i(!0),r(y,null,w(o(n).nTours,s=>(i(),r("div",ao,[t("h2",null,"Actividad "+p(s.key),1),t("div",io,[ro,o(n).tours?x((i(),r("select",{key:0,"onUpdate:modelValue":d=>s.activity=d,name:"Activity",class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[co,(i(!0),r(y,null,w(o(n).tours,d=>(i(),r("option",{class:"capitalize",value:d.id},p(d.name),9,po))),256))],8,uo)),[[g,s.activity]]):f("",!0)]),t("div",mo,[c(h,{for:"fechaAvtidad"+s.key},{default:m(()=>[v(" Fecha de actividad "),o(e).errors.fechaActividad?(i(),r("span",fo,"* Por favor llene este campo")):f("",!0)]),_:2},1032,["for"]),c($,{required:"",modelValue:s.activity_date,"onUpdate:modelValue":d=>s.activity_date=d,"id-name":"fechaActividad"+s.key},null,8,["modelValue","onUpdate:modelValue","id-name"])]),t("div",_o,[c(h,{for:"zone"},{default:m(()=>[v(" Zona ")]),_:1}),x(t("select",{"onUpdate:modelValue":d=>s.zone=d,onInput:l[15]||(l[15]=d=>o(ne)(d.target.value)),id:"zone",name:"zone",class:"capitalize w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[bo,(i(!0),r(y,null,w(a.zones,d=>(i(),r("option",{value:d.id},p(d.name),9,ho))),256))],40,vo),[[g,s.zone]])]),t("div",xo,[c(h,{for:"pickUpZone"},{default:m(()=>[v(" Hotel del pickup ")]),_:1}),o(n).hotels?x((i(),r("select",{key:0,onInput:d=>M(s.activity,s.zone,o(e).season,s.key-1),onFocusout:d=>o(te)(s.key-1,s.activity,s.hotel),"onUpdate:modelValue":d=>s.hotel=d,name:"pickUpZone",id:"pickUpZone",class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[wo,o(n).hotels[s.zone==1?"cancun":"rm"]?(i(!0),r(y,{key:0},w(o(n).hotels[s.zone==1?"cancun":"rm"],d=>(i(),r("option",{class:"capitalize",value:d.id},p(d.name),9,go))),256)):f("",!0)],40,yo)),[[g,s.hotel]]):f("",!0)]),s.pickup?(i(),r("div",ko,[c(h,null,{default:m(()=>[v(" Hora de su pickup ")]),_:1}),c(R,{disabled:"","aria-disabled":"true",value:s.pickup.slice(0,5)},null,8,["value"])])):f("",!0),Vo,Po]))),256))])):f("",!0),o(e).tipoReservacion==2?(i(),r("div",Ao,[t("div",To,[t("div",zo,[c(h,{for:"zone"},{default:m(()=>[v(" Zona ")]),_:1}),x(t("select",{"onUpdate:modelValue":l[16]||(l[16]=s=>o(e).zona=s),onChange:l[17]||(l[17]=s=>o(ee)(s.target.value)),id:"zone",name:"zone",class:"capitalize w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[Uo,(i(!0),r(y,null,w(a.zones,s=>(i(),r("option",{value:s.id},p(s.name),9,Ro))),256))],544),[[g,o(e).zona]])])])])):f("",!0),o(e).zona!==null&&o(e).tipoReservacion==2?(i(),r("div",$o,[t("div",Fo,[o(n).tour.activity?(i(),r("div",No,[c(h,{for:"pickUpZone"},{default:m(()=>[v(" Hotel del pickup ")]),_:1}),o(n).hotels?x((i(),r("select",{key:0,onInput:l[18]||(l[18]=s=>q(o(n).tour.activity,s.target.value)),onChange:l[19]||(l[19]=s=>H(o(e).actividad.activity,o(e).zona,o(e).actividad)),"onUpdate:modelValue":l[20]||(l[20]=s=>o(n).tour.hotel=s),name:"pickUpZone",id:"pickUpZone",class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[So,Array.isArray(o(n).hotels)?(i(!0),r(y,{key:0},w(o(n).hotels,s=>(i(),r("option",{class:"capitalize",value:s.id},p(s.name),9,Bo))),256)):f("",!0)],544)),[[g,o(n).tour.hotel]]):f("",!0)])):f("",!0)])])):f("",!0),t("div",Co,[t("div",Do,[t("div",Ho,[c(h,{for:"notes"},{default:m(()=>[v(" Notas ")]),_:1}),x(t("textarea",{"onUpdate:modelValue":l[21]||(l[21]=s=>o(e).notas=s),class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md",name:"note",id:"notes",cols:"30",rows:"10"},null,512),[[O,o(e).notas]])])])])])])]),actions:m(()=>[Io]),_:1})]))}},Ko=X(Mo,[["__scopeId","data-v-7b157b94"]]);export{Ko as default};
